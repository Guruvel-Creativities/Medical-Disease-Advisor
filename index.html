<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Skin Disease Detection | AILabAPI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
    }
    h1 {
      color: #1a73e8;
    }
    input[type="file"] {
      margin: 20px 0;
    }
    button {
      background-color: #1a73e8;
      color: white;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0c56d0;
    }
    .result {
      margin-top: 25px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      width: 90%;
      max-width: 500px;
      word-break: break-word;
    }
    img {
      max-width: 300px;
      border-radius: 10px;
      margin-top: 15px;
    }
  </style>
</head>
<body>
  <h1>üß¥ Skin Disease Detection</h1>
  <p>Upload a skin image to analyze using AILabAPI</p>

  <input type="file" id="imageInput" accept="image/*" />
  <button onclick="analyzeSkin()">Analyze</button>

  <div class="result" id="resultBox">Result will appear here...</div>

  <script>
    async function analyzeSkin() {
      const fileInput = document.getElementById("imageInput");
      const resultBox = document.getElementById("resultBox");

      if (!fileInput.files.length) {
        alert("Please upload an image first!");
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("image", file);

      resultBox.innerHTML = "üîç Analyzing... Please wait...";

      try {
        // ‚úÖ Use a CORS proxy here
        const proxyUrl = "https://cors-anywhere.herokuapp.com/";
        const apiUrl = "https://api.ailabapi.com/api/portrait/analysis/skin-disease-detection";

        const response = await fetch(proxyUrl + apiUrl, {
          method: "POST",
          headers: {
            "ailabapi-api-key": "iBQYZS9o3vmAC79Grs0IOitLKIuOozXPl5ynHQEqeKJjxyABq3kNe27p4FRnCvhM" // ‚¨ÖÔ∏è Replace with your API key
          },
          body: formData
        });

        const data = await response.json();
        console.log(data);

        if (data.data && data.data.results_english) {
          const results = data.data.results_english;
          let output = `<h3>Analysis Result</h3>`;
          output += `<p><strong>Image Type:</strong> ${data.data.image_type}</p>`;
          output += `<ul>`;
          for (let key in results) {
            output += `<li>${key}: ${(results[key] * 100).toFixed(2)}%</li>`;
          }
          output += `</ul>`;
          resultBox.innerHTML = output;
        } else {
          resultBox.innerHTML = `<p style="color:red;">Error: ${JSON.stringify(data)}</p>`;
        }
      } catch (err) {
        resultBox.innerHTML = `<p style="color:red;">Error: ${err.message}</p>`;
      }
    }
  </script>
</body>
</html>
